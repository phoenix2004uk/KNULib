{local U is"ModuleScienceExperiment".local T is"DMModuleScienceAnimate".function Z{parameter A,B,D,F.local H is SHIP:partsNamed(A).if H:length>D return F(H[D]:getModule(B)).return -2.}function Y{parameter A,B,H,J,K is 1,D is 0.if J and(AIRSPEED>0.1 or STATUS="SPLASHED")return -1.return Z(A,B,D,{parameter L.if L:hasData return -5.if L:inoperable return -4.L:deploy.local M is TIME:seconds.until L:hasData if TIME:seconds-M>10 return -6.if H L:toggle.if K{if not HomeConnection:isConnected return -3.else{L:transmit.wait until not L:hasData.}}return 0.}).}function X{parameter A,B,D is 0.if not HomeConnection:isConnected return -3.return Z(A,B,D,{parameter L.if not L:hasData return -7.L:transmit.wait until not L:hasData. return 0.}).}function W{parameter A,B,D is 0.return Z(A,B,D,{parameter L.if L:inoperable return -4.if L:hasData L:RESET.wait 2.return 0.}).}local S is Lex().local P is Lex().local O is Lex().local AA is List("sensorAccelerometer").for N in List("sensorThermometer","sensorBarometer","sensorAccelerometer","sensorGravimeter","sensorAtmosphere","science.L","GooExperiment"){set S[N]to Y@:bind(N,U,0,AA:CONTAINS(N)).set O[N]to X@:bind(N,U).set P[N]to W@:bind(N,U).}for N in List("dmmagBoom","rpwsAnt"){set S[N]to Y@:bind(N,T,1,AA:CONTAINS(N)).set O[N]to X@:bind(N,T).set P[N]to W@:bind(N,T).}export(Lex("run",S,"transmit",O,"reset",P)).}